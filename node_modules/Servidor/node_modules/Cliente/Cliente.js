const Teclas = require("Teclas");
var Cliente = function() {
	this.teclas= null;
	this.servidor= null;
	this.constructor = function(args, callback) {
		try{
			this.teclas = new Teclas();
		}
		catch(err){return "cliente.init: " + err.message}
	};

	//Evento que se dispara cuando un clientee presiona una tecla
	this.evKeyDown = function( codigo ) {
		//Hacer muchos cálculos. Actualizar el obj personaje asociado al clientee. Devolver el personaje actualizado.
		var accion;

		accion = this.cliente.teclas.getTecla( codigo ).accion;

		this.cliente.socket.emit("updateCharacter", accion);
		this.cliente.servidor.notificarClientes(this.cliente.socket.id, accion);
	};

	this.evDesconectarCliente = function(){
		this.cliente.socket.disconnect();
		console.log("pasó por acá");
		console.log(this.cliente.socket.disconnected);
		console.log(this.cliente.socket.connected);
	};

	this.constructor();
};

module.exports = Cliente;